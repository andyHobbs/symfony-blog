{% extends 'base.html.twig' %}

{% block title %} {{ post.name }} {% endblock %}

{% block body %}
    <div class="container">
        <div class="row">
            <div class="col-md-12">

                <p><a class="btn btn-success" href="{{ path('post_store') }}">Add new</a></p>

                <div class="card">
                    <div class="card-header">
                        {{ post.name }}
                    </div>
                    <div class="card-body">
                        <blockquote class="blockquote mb-0">
                            <p>{{ post.content }}</p>
                            <footer class="blockquote-footer">Created at: <cite
                                        title="{{ post.createdAt | date("H:i d.m.Y") }}">{{ post.createdAt | date("H:i d.m.Y") }}</cite>
                            </footer>
                        </blockquote>
                    </div>
                </div>
                <p class="p-2 float-right">
                    <a class="btn btn-primary" href="{{ path('post_edit', {'id':post.id}) }}">Update</a>
                    <a class="btn btn-danger" href="{{ path('post_remove', {'id':post.id}) }}">Delete</a>
                </p>
            </div>
            <div class="col-md-12 m-2">
                <form action="{{ path('ajax_add_comment') }}" method="post" name="add-comment-form">
                    <div class="form-group">
                        <label for="inputAuthor">Author name</label>
                        <input type="text" class="form-control" id="inputAuthor" aria-describedby="authorHint"
                               name="author" required="required" placeholder="Set your name">
                        <small id="authorHint" class="form-text text-muted">Must contain two words, both with a capital
                            letter.
                        </small>
                    </div>
                    <div class="form-group">
                        <label for="textareaContent">Content</label>
                        <textarea class="form-control" id="textareaContent" rows="3" name="content" required="required"></textarea>
                    </div>
                    <input type="hidden" name="post" value="{{ post.id }}">
                    <button type="submit" class="btn btn-primary float-right">Submit</button>
                </form>
            </div>
            <div class="col-md-12 m-4 p-3" id="comments">
                <div class="list-group">
                    {% for comment in post.comments %}
                        <div class="list-group-item list-group-item-action flex-column align-items-start">
                            <div class="d-flex w-100 justify-content-between">
                                <h5 class="mb-1">{{ comment.author }}</h5>
                                <small>{{ comment.createdAt | date("H:i d.m.Y") }}</small>
                            </div>
                            <p class="mb-1">{{ comment.content }}</p>
                        </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
{% endblock %}
{% block javascripts %}

    <script src="{{ asset('js/post.js') }}"></script>

{% endblock %}